import{j as e,C as y,a as C,b as N,c as w,d as v,B as F,e as S}from"./ui-DCtcd1Kk.js";import{u as L,r as a,L as A}from"./router-C32cmwfs.js";import{u as E,o as I,s as d}from"./utils-DCNUdSfE.js";import{A as P,C as D,a as R,F as T,b as u,c as x,d as p,e as h,f as j,s as k}from"./alert-CsIf4CTI.js";import{u as B}from"./index-XEsyHGvM.js";import{I as f}from"./input-DjdrYohH.js";import{R as q}from"./RootLayout-Bf31PLGy.js";import"./charts-BMSya-r6.js";import"./react-Csw2ODfV.js";const H=I({email:d().email("Invalid email format"),password:d().min(1,"Password is required")}),W=()=>{const{login:g,isAuthenticated:t}=B(),o=L(),[i,n]=a.useState(null),[l,c]=a.useState(!1);a.useEffect(()=>{t&&o("/dashboard")},[t,o]);const r=E({resolver:k(H),defaultValues:{email:"",password:""}}),b=async s=>{n(null),c(!0);try{console.log("Submitting login form:",{email:s.email}),await g(s)}catch(m){console.error("Login error:",m),n(m.message||"An error occurred during login. Please try again.")}finally{c(!1)}};return e.jsx(q,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-64px)] bg-background p-4",children:e.jsxs(y,{className:"w-full max-w-md",children:[e.jsxs(C,{className:"space-y-1",children:[e.jsx(N,{className:"text-2xl font-bold text-center",children:"Login"}),e.jsx(w,{className:"text-center",children:"Enter your credentials to access your account"})]}),e.jsxs(v,{children:[i&&e.jsxs(P,{variant:"destructive",className:"mb-6",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx(R,{children:i})]}),e.jsx(T,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(b),className:"space-y-4",children:[e.jsx(u,{control:r.control,name:"email",render:({field:s})=>e.jsxs(x,{children:[e.jsx(p,{children:"Email"}),e.jsx(h,{children:e.jsx(f,{placeholder:"email@example.com",...s,type:"email",autoComplete:"email"})}),e.jsx(j,{})]})}),e.jsx(u,{control:r.control,name:"password",render:({field:s})=>e.jsxs(x,{children:[e.jsx(p,{children:"Password"}),e.jsx(h,{children:e.jsx(f,{placeholder:"••••••••",...s,type:"password",autoComplete:"current-password"})}),e.jsx(j,{})]})}),e.jsx(F,{type:"submit",className:"w-full",disabled:l,children:l?"Logging in...":"Login"})]})})]}),e.jsx(S,{className:"flex justify-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Don't have an account?"," ",e.jsx(A,{to:"/signup",className:"text-primary hover:underline",children:"Sign up"})]})})]})})})};export{W as default};
