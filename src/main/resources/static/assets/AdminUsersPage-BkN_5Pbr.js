import{j as e,C as y,a as v,b as w,c as C,d as E,B as u}from"./ui-DCtcd1Kk.js";import{r as t,u as S}from"./router-C32cmwfs.js";import{A as U}from"./AdminLayout-Dt8VV5pt.js";import{T,a as L,b as d,c as n,d as A,e as l}from"./table-D9jKlXO1.js";import{I as B}from"./input-DjdrYohH.js";import{B as k}from"./badge-CCKXs842.js";import{t as I}from"./index-XEsyHGvM.js";import{S as R}from"./search-T1dYjenp.js";import{E as D}from"./eye-BZq8TSu9.js";import"./charts-BMSya-r6.js";import"./react-Csw2ODfV.js";import"./utils-DCNUdSfE.js";import"./Sidebar-CR8TwwPA.js";import"./RootLayout-Bf31PLGy.js";import"./gift-41HnvwwA.js";const X=()=>{const[o,j]=t.useState([]),[m,c]=t.useState([]),[p,h]=t.useState(!0),[i,f]=t.useState(""),N=S();t.useEffect(()=>{g()},[]),t.useEffect(()=>{if(i.trim()==="")c(o);else{const s=i.toLowerCase();c(o.filter(a=>{var r,x;return((r=a.name)==null?void 0:r.toLowerCase().includes(s))||((x=a.email)==null?void 0:x.toLowerCase().includes(s))||a.phoneNumber&&a.phoneNumber.includes(s)}))}},[i,o]);const g=async()=>{try{h(!0);const s=localStorage.getItem("token"),a=await fetch("/api/users",{headers:{Authorization:`Bearer ${s}`}});if(!a.ok)throw new Error(`Failed to fetch users: ${a.status}`);const r=await a.json();j(r),c(r)}catch(s){console.error("Error fetching users:",s),I.error("Failed to load users")}finally{h(!1)}},b=s=>{N(`/admin/users/${s}`)};return e.jsx(U,{children:e.jsxs("div",{className:"flex-1 space-y-4 p-6 md:p-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Users Management"})}),e.jsxs(y,{children:[e.jsxs(v,{children:[e.jsx(w,{children:"Users"}),e.jsx(C,{children:"View and manage all registered users"})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(R,{className:"absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(B,{placeholder:"Search users by name, email, or phone...",value:i,onChange:s=>f(s.target.value),className:"pl-8"})]}),e.jsx("div",{className:"ml-2",children:e.jsx(u,{disabled:!0,children:"Export Users"})})]}),p?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(T,{children:[e.jsx(L,{children:e.jsxs(d,{children:[e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Email"}),e.jsx(n,{children:"Roles"}),e.jsx(n,{className:"text-right",children:"Actions"})]})}),e.jsx(A,{children:m.length===0?e.jsx(d,{children:e.jsx(l,{colSpan:4,className:"text-center py-4",children:i?"No users found matching your search":"No users found"})}):m.map(s=>{var a;return e.jsxs(d,{children:[e.jsx(l,{className:"font-medium",children:s.name}),e.jsx(l,{children:s.email}),e.jsx(l,{className:"space-x-1",children:(a=s.roles)==null?void 0:a.map(r=>e.jsx(k,{variant:r.includes("ADMIN")?"default":"outline",children:r.replace("ROLE_","")},r))}),e.jsx(l,{className:"text-right",children:e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>b(s.id),children:e.jsx(D,{className:"h-4 w-4"})})})]},s.id)})})]})})]})]})]})})};export{X as default};
