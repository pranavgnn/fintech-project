import{j as e,B as y,C as b,a as C,b as S,c as v,d as A,e as P}from"./ui-DCtcd1Kk.js";import{u as k,r as f,L as w}from"./router-C32cmwfs.js";import{f as F,c as X,u as q,o as j,s as l,d as D}from"./utils-DCNUdSfE.js";import{A as B,C as I,a as L,F as E,b as a,c as n,d as t,e as o,f as i,s as O}from"./alert-CsIf4CTI.js";import{u as T}from"./index-XEsyHGvM.js";import{I as c}from"./input-DjdrYohH.js";import{C as $,a as z}from"./calendar-BH1FcBMN.js";import{P as Z,a as R,b as H,R as J}from"./RootLayout-Bf31PLGy.js";import{S as g}from"./separator-BHw_LxXo.js";import"./charts-BMSya-r6.js";import"./react-Csw2ODfV.js";import"./chevron-right-AcBWCHTh.js";function K({date:d,onSelect:m}){return e.jsxs(Z,{children:[e.jsx(R,{asChild:!0,children:e.jsxs(y,{variant:"outline",className:X("w-[240px] justify-start text-left font-normal",!d&&"text-muted-foreground"),children:[e.jsx($,{className:"mr-2 h-4 w-4"}),d?F(d,"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(H,{className:"w-auto p-0",align:"start",children:e.jsx(z,{mode:"single",selected:d,onSelect:m})})]})}const M=j({name:l().min(1,"Name is required"),email:l().email("Invalid email format"),password:l().min(8,"Password must be at least 8 characters").regex(/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=])(?=\S+$).{8,}$/,"Password must contain at least one digit, one uppercase, one lowercase, and one special character"),phoneNumber:l().regex(/^\+?[1-9]\d{1,14}$/,"Invalid phone number format"),kyc:j({dateOfBirth:D({required_error:"Date of birth is required"}).refine(d=>d<new Date,{message:"Date of birth must be in the past"}),aadhaarNumber:l().min(1,"Aadhaar number is required"),panNumber:l().min(1,"PAN number is required"),address:j({line1:l().min(1,"Line 1 is required"),line2:l().optional(),street:l().min(1,"Street is required"),city:l().min(1,"City is required"),state:l().min(1,"State is required"),country:l().min(1,"Country is required"),zipCode:l().min(1,"ZIP code is required")})})}),te=()=>{const{signup:d,isAuthenticated:m}=T(),h=k(),[u,p]=f.useState(null);f.useEffect(()=>{m&&h("/dashboard")},[m,h]);const s=q({resolver:O(M),defaultValues:{name:"",email:"",password:"",phoneNumber:"",kyc:{aadhaarNumber:"",panNumber:"",address:{line1:"",line2:"",street:"",city:"",state:"",country:"",zipCode:""}}}}),N=async r=>{p(null);try{const x={...r,kyc:{...r.kyc,dateOfBirth:r.kyc.dateOfBirth.toISOString().split("T")[0]}};await d(x)}catch(x){console.error("Signup error:",x),p(x.message||"An error occurred during sign up. Please try again.")}};return e.jsx(J,{children:e.jsx("div",{className:"flex justify-center py-8 px-4 bg-background",children:e.jsxs(b,{className:"w-full max-w-4xl",children:[e.jsxs(C,{children:[e.jsx(S,{className:"text-2xl font-bold text-center",children:"Create an Account"}),e.jsx(v,{className:"text-center",children:"Sign up to get started with our financial services"})]}),e.jsxs(A,{children:[u&&e.jsxs(B,{variant:"destructive",className:"mb-6",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx(L,{children:u})]}),e.jsx(E,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(N),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{control:s.control,name:"name",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:"Full Name"}),e.jsx(o,{children:e.jsx(c,{placeholder:"John Doe",...r})}),e.jsx(i,{})]})}),e.jsx(a,{control:s.control,name:"email",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:"Email"}),e.jsx(o,{children:e.jsx(c,{placeholder:"email@example.com",type:"email",...r})}),e.jsx(i,{})]})}),e.jsx(a,{control:s.control,name:"password",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:"Password"}),e.jsx(o,{children:e.jsx(c,{placeholder:"••••••••",type:"password",...r})}),e.jsx(i,{})]})}),e.jsx(a,{control:s.control,name:"phoneNumber",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:"Phone Number"}),e.jsx(o,{children:e.jsx(c,{placeholder:"+1234567890",...r})}),e.jsx(i,{})]})})]})]}),e.jsx(g,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"KYC Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(a,{control:s.control,name:"kyc.dateOfBirth",render:({field:r})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(t,{children:"Date of Birth"}),e.jsx(K,{date:r.value,onSelect:r.onChange}),e.jsx(i,{})]})}),e.jsx(a,{control:s.control,name:"kyc.aadhaarNumber",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:"Aadhaar Number"}),e.jsx(o,{children:e.jsx(c,{placeholder:"XXXX XXXX XXXX",...r})}),e.jsx(i,{})]})}),e.jsx(a,{control:s.control,name:"kyc.panNumber",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:"PAN Number"}),e.jsx(o,{children:e.jsx(c,{placeholder:"ABCDE1234F",...r})}),e.jsx(i,{})]})})]})]}),e.jsx(g,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{control:s.control,name:"kyc.address.line1",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:"Address Line 1"}),e.jsx(o,{children:e.jsx(c,{placeholder:"Apartment or house number",...r})}),e.jsx(i,{})]})}),e.jsx(a,{control:s.control,name:"kyc.address.line2",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:"Address Line 2 (Optional)"}),e.jsx(o,{children:e.jsx(c,{placeholder:"Building name or floor",...r})}),e.jsx(i,{})]})}),e.jsx(a,{control:s.control,name:"kyc.address.street",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:"Street"}),e.jsx(o,{children:e.jsx(c,{placeholder:"Street name",...r})}),e.jsx(i,{})]})}),e.jsx(a,{control:s.control,name:"kyc.address.city",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:"City"}),e.jsx(o,{children:e.jsx(c,{placeholder:"City",...r})}),e.jsx(i,{})]})}),e.jsx(a,{control:s.control,name:"kyc.address.state",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:"State"}),e.jsx(o,{children:e.jsx(c,{placeholder:"State",...r})}),e.jsx(i,{})]})}),e.jsx(a,{control:s.control,name:"kyc.address.country",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:"Country"}),e.jsx(o,{children:e.jsx(c,{placeholder:"Country",...r})}),e.jsx(i,{})]})}),e.jsx(a,{control:s.control,name:"kyc.address.zipCode",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:"ZIP Code"}),e.jsx(o,{children:e.jsx(c,{placeholder:"ZIP Code",...r})}),e.jsx(i,{})]})})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(y,{type:"submit",className:"w-full",disabled:s.formState.isSubmitting,children:s.formState.isSubmitting?"Creating Account...":"Create Account"})})]})})]}),e.jsx(P,{className:"flex justify-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Already have an account?"," ",e.jsx(w,{to:"/login",className:"text-primary hover:underline",children:"Log in"})]})})]})})})};export{te as default};
