import{j as e,C as x,d as f,B as y,a as g,b as N,c as b}from"./ui-DCtcd1Kk.js";import{u as P,r as k}from"./router-C32cmwfs.js";import{A as Y}from"./AdminLayout-Dt8VV5pt.js";import{a as M,t as W}from"./index-XEsyHGvM.js";import{S as j}from"./skeleton-BbxErKBh.js";import{U as q}from"./Sidebar-CR8TwwPA.js";import{c as Q,C as Z}from"./RootLayout-Bf31PLGy.js";import{A as ee}from"./arrow-right-left-DbfiJvWz.js";import{G as se}from"./gift-41HnvwwA.js";import{T as te,a as ae,b as D,c as C}from"./tabs-BP-itumS.js";import{c as L}from"./utils-DCNUdSfE.js";import{a as R,f as re,C as $,X as G,Y as V,T as E,L as I,g as ne,B as le,b as F,P as ce,d as oe,e as ie}from"./charts-BMSya-r6.js";import{T as _,a as z,b as T,c as u,d as K,e as h}from"./table-D9jKlXO1.js";import{B as v}from"./badge-CCKXs842.js";import{E as de}from"./eye-BZq8TSu9.js";import{A as O}from"./arrow-right-B-WtKbaQ.js";import"./react-Csw2ODfV.js";/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],ue=Q("banknote",me),he=({stats:t,isLoading:d})=>{const c=s=>s==null||isNaN(s)?"₹0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(s),a=s=>s==null||isNaN(s)?"0":new Intl.NumberFormat("en-IN").format(s);if(d)return e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[...Array(5)].map((s,l)=>e.jsx(x,{children:e.jsxs(f,{className:"p-6",children:[e.jsx(j,{className:"h-7 w-1/2 mb-3"}),e.jsx(j,{className:"h-10 w-1/3"})]})},l))});const r=[{title:"Total Users",value:a(t.totalUsers),icon:e.jsx(q,{className:"h-5 w-5 text-blue-500"}),subtext:"Registered users"},{title:"Total Accounts",value:a(t.totalAccounts),icon:e.jsx(Z,{className:"h-5 w-5 text-green-500"}),subtext:"Active accounts"},{title:"Transactions",value:a(t.totalTransactions),icon:e.jsx(ee,{className:"h-5 w-5 text-purple-500"}),subtext:"Processed transactions"},{title:"Active Offers",value:a(t.activeOffers),icon:e.jsx(se,{className:"h-5 w-5 text-amber-500"}),subtext:"Live promotions"},{title:"Total Balance",value:c((t==null?void 0:t.totalBalance)||0),icon:e.jsx(ue,{className:"h-5 w-5 text-emerald-500"}),subtext:"Across all accounts"}];return e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:r.map((s,l)=>e.jsx(x,{children:e.jsxs(f,{className:"flex flex-row items-center justify-between p-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s.title}),e.jsx("p",{className:"text-2xl font-bold",children:s.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.subtext})]}),e.jsx("div",{className:"p-2 bg-background rounded-full",children:s.icon})]})},l))})},xe=({data:t,isLoading:d})=>{const{theme:c}=M(),a=c==="dark",r={line:a?"#a78bfa":"#8b5cf6",activeDot:a?"#c4b5fd":"#a78bfa",grid:a?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",text:a?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.7)"},s=({active:l,payload:n,label:p})=>l&&n&&n.length?e.jsxs("div",{className:L("rounded-md border p-3 shadow-md","bg-background/95 text-foreground","border-border"),children:[e.jsxs("p",{className:"font-medium mb-1",children:["Month: ",p]}),n.map((m,i)=>e.jsxs("p",{className:"text-sm flex items-center gap-2 py-1",children:[e.jsx("span",{className:"w-3 h-3 rounded-full inline-block",style:{backgroundColor:m.color}}),e.jsxs("span",{className:"font-medium",children:[m.name,": ",m.value," users"]})]},`item-${i}`))]}):null;return d?e.jsx(j,{className:"h-full w-full"}):!t||t.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-muted-foreground",children:"No user activity data available"})}):e.jsx(R,{width:"100%",height:"100%",children:e.jsxs(re,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx($,{strokeDasharray:"3 3",stroke:r.grid}),e.jsx(G,{dataKey:"month",tick:{fill:r.text}}),e.jsx(V,{tick:{fill:r.text}}),e.jsx(E,{content:e.jsx(s,{})}),e.jsx(I,{wrapperStyle:{color:r.text}}),e.jsx(ne,{type:"monotone",dataKey:"users",name:"Total Users",stroke:r.line,activeDot:{r:8,fill:r.activeDot},strokeWidth:2})]})})},fe=({data:t,isLoading:d})=>{const{theme:c}=M(),a=c==="dark",r={inflow:a?"#4ade80":"#22c55e",outflow:a?"#f87171":"#ef4444",grid:a?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",text:a?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.7)"},s=({active:l,payload:n,label:p})=>l&&n&&n.length?e.jsxs("div",{className:L("rounded-md border p-3 shadow-md","bg-background/95 text-foreground","border-border"),children:[e.jsxs("p",{className:"font-medium mb-1",children:["Month: ",p]}),n.map((m,i)=>e.jsxs("p",{className:"text-sm flex items-center gap-2 py-1",children:[e.jsx("span",{className:"w-3 h-3 rounded-full inline-block",style:{backgroundColor:m.color}}),e.jsxs("span",{className:"font-medium",children:[m.name,":"," ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(m.value)]})]},`item-${i}`))]}):null;return d?e.jsx(j,{className:"h-full w-full"}):!t||t.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-muted-foreground",children:"No transaction data available"})}):e.jsx(R,{width:"100%",height:"100%",children:e.jsxs(le,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx($,{strokeDasharray:"3 3",stroke:r.grid}),e.jsx(G,{dataKey:"month",tick:{fill:r.text}}),e.jsx(V,{tickFormatter:l=>new Intl.NumberFormat("en-IN",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(l),tick:{fill:r.text}}),e.jsx(E,{content:e.jsx(s,{}),cursor:{fill:a?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"}}),e.jsx(I,{wrapperStyle:{color:r.text}}),e.jsx(F,{name:"Money In",dataKey:"incoming",fill:r.inflow,radius:[4,4,0,0]}),e.jsx(F,{name:"Money Out",dataKey:"outgoing",fill:r.outflow,radius:[4,4,0,0]})]})})},je=({data:t,isLoading:d})=>{const{theme:c}=M(),a=c==="dark",r=a?["#60a5fa","#4ade80","#c084fc","#fbbf24"]:["#3b82f6","#10b981","#8b5cf6","#f59e0b"],s=({active:l,payload:n})=>l&&n&&n.length?e.jsxs("div",{className:L("rounded-md border p-3 shadow-md","bg-background/95 text-foreground","border-border"),children:[e.jsx("p",{className:"font-medium",children:n[0].name}),e.jsxs("p",{className:"text-sm flex items-center gap-2 py-1",children:[e.jsx("span",{className:"w-3 h-3 rounded-full inline-block",style:{backgroundColor:n[0].fill}}),e.jsxs("span",{className:"font-medium",children:[n[0].value," accounts (",(n[0].percent*100).toFixed(0),"%)"]})]})]}):null;return d?e.jsx(j,{className:"h-full w-full"}):!t||t.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-muted-foreground",children:"No account data available"})}):e.jsx(R,{width:"100%",height:"100%",children:e.jsxs(ce,{children:[e.jsx(oe,{data:t,cx:"50%",cy:"50%",labelLine:!1,outerRadius:150,fill:"#8884d8",dataKey:"count",nameKey:"type",label:({type:l,percent:n})=>`${l} ${(n*100).toFixed(0)}%`,children:t.map((l,n)=>e.jsx(ie,{fill:r[n%r.length]},`cell-${n}`))}),e.jsx(E,{content:e.jsx(s,{})}),e.jsx(I,{wrapperStyle:{color:a?"#e5e7eb":"#111827"}})]})})},pe=({users:t,isLoading:d})=>{const c=P();return d?e.jsx("div",{className:"space-y-2",children:[...Array(5)].map((a,r)=>e.jsx(j,{className:"h-12 w-full"},r))}):!t||t.length===0?e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-muted-foreground",children:"No recent users found"})}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(_,{children:[e.jsx(z,{children:e.jsxs(T,{children:[e.jsx(u,{children:"Name"}),e.jsx(u,{children:"Email"}),e.jsx(u,{children:"Role"}),e.jsx(u,{className:"w-[50px]"})]})}),e.jsx(K,{children:t.map(a=>{var r;return e.jsxs(T,{children:[e.jsx(h,{className:"font-medium",children:a.name}),e.jsx(h,{className:"max-w-[180px] truncate",children:a.email}),e.jsx(h,{children:(r=a.roles)==null?void 0:r.map(s=>e.jsx(v,{variant:s.includes("ADMIN")?"default":"outline",className:"mr-1",children:s.replace("ROLE_","")},s))}),e.jsx(h,{children:e.jsx(y,{variant:"ghost",size:"icon",onClick:()=>c(`/admin/users/${a.id}`),children:e.jsx(de,{className:"h-4 w-4"})})})]},a.id)})})]})})},ge=({transactions:t,isLoading:d})=>{const c=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(s),a=s=>{switch(s.toUpperCase()){case"COMPLETED":return e.jsx(v,{className:"bg-green-500",children:"Completed"});case"PENDING":return e.jsx(v,{variant:"outline",className:"border-yellow-500 text-yellow-500",children:"Pending"});case"FAILED":return e.jsx(v,{variant:"destructive",children:"Failed"});default:return e.jsx(v,{variant:"outline",children:s})}},r=s=>new Date(s).toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"});return d?e.jsx("div",{className:"space-y-2",children:[...Array(5)].map((s,l)=>e.jsx(j,{className:"h-12 w-full"},l))}):!t||t.length===0?e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-muted-foreground",children:"No recent transactions found"})}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(_,{children:[e.jsx(z,{children:e.jsxs(T,{children:[e.jsx(u,{children:"From"}),e.jsx(u,{children:"To"}),e.jsx(u,{children:"Amount"}),e.jsx(u,{children:"Date"}),e.jsx(u,{children:"Status"})]})}),e.jsx(K,{children:t.map(s=>e.jsxs(T,{children:[e.jsx(h,{className:"font-mono text-xs",children:s.fromAccountNumber||"—"}),e.jsx(h,{className:"font-mono text-xs",children:s.toAccountNumber||"—"}),e.jsx(h,{className:"font-medium",children:c(s.amount)}),e.jsx(h,{className:"text-sm",children:r(s.timestamp)}),e.jsx(h,{children:a(s.status)})]},s.id))})]})})},Fe=()=>{const[t,d]=k.useState({totalUsers:0,totalAccounts:0,totalTransactions:0,activeOffers:0,totalBalance:0,recentUsers:[],recentTransactions:[],transactionVolume:[],accountsByType:[],userGrowth:[]}),[c,a]=k.useState(!0),r=P();k.useEffect(()=>{s()},[]);const s=async()=>{a(!0);try{const i=localStorage.getItem("token");if(!i)throw new Error("No authentication token found");const o=await fetch("/api/admin/stats",{headers:{Authorization:`Bearer ${i}`}});if(!o.ok)throw new Error(`Failed to fetch dashboard stats: ${o.status}`);const A=await o.json(),w=await fetch("/api/users?limit=5",{headers:{Authorization:`Bearer ${i}`}});let B=[];w.ok&&(B=(await w.json()).slice(0,5));const U=await fetch("/api/admin/transactions/recent",{headers:{Authorization:`Bearer ${i}`}});let S=[];U.ok&&(S=await U.json());const J=l(),H=n(),X=p();d({...A,recentUsers:B,recentTransactions:S,transactionVolume:J,accountsByType:H,userGrowth:X})}catch(i){console.error("Error fetching dashboard data:",i),W.error("Failed to load dashboard statistics"),m()}finally{a(!1)}},l=()=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep"].map(o=>({month:o,incoming:Math.floor(Math.random()*5e5)+1e5,outgoing:Math.floor(Math.random()*4e5)+8e4})),n=()=>[{type:"Savings",count:Math.floor(Math.random()*100)+50},{type:"Checking",count:Math.floor(Math.random()*80)+30},{type:"Fixed Deposit",count:Math.floor(Math.random()*40)+10}],p=()=>{const i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep"];let o=10;return i.map(A=>{const w=Math.floor(Math.random()*20)+5;return o+=w,{month:A,users:o}})},m=()=>{d({totalUsers:127,totalAccounts:195,totalTransactions:1423,activeOffers:8,totalBalance:15789034,recentUsers:Array(5).fill({}).map((i,o)=>({id:o+1,name:`User ${o+1}`,email:`user${o+1}@example.com`,roles:["ROLE_USER"]})),recentTransactions:Array(5).fill({}).map((i,o)=>({id:o+1,fromAccountNumber:`ACCT${1e3+o}`,toAccountNumber:`ACCT${2e3+o}`,amount:Math.floor(Math.random()*1e4)+1e3,timestamp:new Date(Date.now()-o*864e5).toISOString(),status:["COMPLETED","PENDING","COMPLETED","COMPLETED","FAILED"][o]})),transactionVolume:l(),accountsByType:n(),userGrowth:p()})};return e.jsx(Y,{children:e.jsxs("div",{className:"flex-1 space-y-6 p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Admin Dashboard"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{variant:"outline",onClick:()=>s(),children:"Refresh Data"}),e.jsx(y,{onClick:()=>r("/admin/reports"),children:"Full Reports"})]})]}),e.jsx(he,{stats:{totalUsers:t.totalUsers,totalAccounts:t.totalAccounts,totalTransactions:t.totalTransactions,activeOffers:t.activeOffers,totalBalance:t.totalBalance},isLoading:c}),e.jsxs(te,{defaultValue:"transactions",className:"space-y-4",children:[e.jsxs(ae,{children:[e.jsx(D,{value:"transactions",children:"Transaction Volume"}),e.jsx(D,{value:"accounts",children:"Accounts Distribution"}),e.jsx(D,{value:"users",children:"User Growth"})]}),e.jsx(C,{value:"transactions",className:"space-y-4",children:e.jsxs(x,{children:[e.jsxs(g,{children:[e.jsx(N,{children:"Transaction Volume"}),e.jsx(b,{children:"Monthly transaction volume over time"})]}),e.jsx(f,{className:"h-96",children:e.jsx(fe,{data:t.transactionVolume,isLoading:c})})]})}),e.jsx(C,{value:"accounts",className:"space-y-4",children:e.jsxs(x,{children:[e.jsxs(g,{children:[e.jsx(N,{children:"Account Type Distribution"}),e.jsx(b,{children:"Distribution of accounts by type"})]}),e.jsx(f,{className:"h-96",children:e.jsx(je,{data:t.accountsByType,isLoading:c})})]})}),e.jsx(C,{value:"users",className:"space-y-4",children:e.jsxs(x,{children:[e.jsxs(g,{children:[e.jsx(N,{children:"User Growth"}),e.jsx(b,{children:"Monthly user registration growth"})]}),e.jsx(f,{className:"h-96",children:e.jsx(xe,{data:t.userGrowth,isLoading:c})})]})})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(x,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Recent Users"}),e.jsx(b,{children:"Latest registered users"})]}),e.jsxs(y,{variant:"ghost",size:"sm",onClick:()=>r("/admin/users"),children:["View All ",e.jsx(O,{className:"ml-1 h-4 w-4"})]})]}),e.jsx(f,{children:e.jsx(pe,{users:t.recentUsers,isLoading:c})})]}),e.jsxs(x,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Recent Transactions"}),e.jsx(b,{children:"Latest financial transactions"})]}),e.jsxs(y,{variant:"ghost",size:"sm",onClick:()=>r("/admin/transactions"),children:["View All ",e.jsx(O,{className:"ml-1 h-4 w-4"})]})]}),e.jsx(f,{children:e.jsx(ge,{transactions:t.recentTransactions,isLoading:c})})]})]}),e.jsxs(x,{children:[e.jsxs(g,{children:[e.jsx(N,{children:"Platform Performance"}),e.jsx(b,{children:"Real-time system health metrics"})]}),e.jsx(f,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"API Response Time"}),e.jsx("p",{className:"font-medium text-2xl",children:"124ms"}),e.jsx("div",{className:"h-1 w-full bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:"15%"}})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Database Load"}),e.jsx("p",{className:"font-medium text-2xl",children:"42%"}),e.jsx("div",{className:"h-1 w-full bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:"42%"}})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Error Rate"}),e.jsx("p",{className:"font-medium text-2xl",children:"0.2%"}),e.jsx("div",{className:"h-1 w-full bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:"2%"}})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Server Uptime"}),e.jsx("p",{className:"font-medium text-2xl",children:"99.99%"}),e.jsx("div",{className:"h-1 w-full bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:"99.9%"}})})]})]})})]})]})})};export{Fe as default};
