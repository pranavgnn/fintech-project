import{j as e,C as c,a as I,b as S,c as P,d as i,e as Y,B as t}from"./ui-DCtcd1Kk.js";import{u as V,r as x}from"./router-C32cmwfs.js";import{u as _,t as $}from"./index-XEsyHGvM.js";import{D as G,C}from"./DashboardLayout-gnvqe74Z.js";import{T as R,a as K,b as w,c as T}from"./tabs-BP-itumS.js";import{f}from"./formatters-CGbyXkBS.js";import{c as O}from"./utils-DCNUdSfE.js";import{E as B}from"./eye-BZq8TSu9.js";import{A as g}from"./arrow-up-down-By2ahnEk.js";import{c as U,C as k}from"./RootLayout-Bf31PLGy.js";import{T as X,a as q,b as A,c as u,d as J,e as j}from"./table-D9jKlXO1.js";import{B as p}from"./badge-CCKXs842.js";import{C as M}from"./Sidebar-CR8TwwPA.js";import"./charts-BMSya-r6.js";import"./react-Csw2ODfV.js";import"./arrow-right-left-DbfiJvWz.js";/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]],E=U("landmark",Q),W=({account:s,onViewTransactions:l})=>{const n=`•••• ${s.accountNumber.slice(-4)}`,d=()=>{switch(s.type){case"SAVINGS":return e.jsx(E,{className:"h-12 w-12 text-blue-500"});case"CHECKING":return e.jsx(k,{className:"h-12 w-12 text-green-500"});case"FIXED_DEPOSIT":return e.jsx(E,{className:"h-12 w-12 text-purple-500"});default:return e.jsx(k,{className:"h-12 w-12 text-primary"})}},a=h=>h.replace("_"," ").toLowerCase().replace(/\b\w/g,o=>o.toUpperCase());return e.jsxs(c,{className:O("overflow-hidden transition-all hover:shadow-md",s.balance<1e3&&"border-amber-500/50"),children:[e.jsx(I,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(S,{children:[a(s.type)," Account"]}),e.jsx(P,{children:n})]}),d()]})}),e.jsx(i,{children:e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"text-2xl font-bold",children:f(s.balance)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Account Number: ",s.accountNumber]})]})}),e.jsxs(Y,{className:"pt-2 flex justify-between",children:[e.jsxs(t,{variant:"ghost",size:"sm",onClick:l,children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Transactions"]}),e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>window.location.href="/transfer",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Transfer"]})]})]})},Z=({accounts:s,onViewTransactions:l})=>{const n=V();if(s.length===0)return e.jsxs(c,{className:"border p-6 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"You don't have any accounts yet."}),e.jsx(t,{onClick:()=>n("/accounts/create"),className:"mt-4",children:"Create Your First Account"})]});const d=a=>{switch(a){case"SAVINGS":return e.jsx(p,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-200",children:"Savings"});case"CHECKING":return e.jsx(p,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-200",children:"Checking"});case"FIXED_DEPOSIT":return e.jsx(p,{variant:"outline",className:"bg-purple-500/10 text-purple-600 border-purple-200",children:"Fixed Deposit"});default:return e.jsx(p,{variant:"outline",children:a})}};return e.jsx(c,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(X,{children:[e.jsx(q,{children:e.jsxs(A,{children:[e.jsx(u,{children:"Account Number"}),e.jsx(u,{children:"Type"}),e.jsx(u,{className:"text-right",children:"Balance"}),e.jsx(u,{className:"text-right",children:"Actions"})]})}),e.jsx(J,{children:s.map(a=>e.jsxs(A,{children:[e.jsx(j,{className:"font-medium",children:a.accountNumber}),e.jsx(j,{children:d(a.type)}),e.jsx(j,{className:"text-right",children:f(a.balance)}),e.jsx(j,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(t,{variant:"ghost",size:"icon",onClick:()=>l(a.id),children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx(t,{variant:"ghost",size:"icon",onClick:()=>n("/transfer"),children:e.jsx(g,{className:"h-4 w-4"})})]})})]},a.id))})]})})})},pe=()=>{const{user:s}=_(),l=V(),[n,d]=x.useState([]),[a,h]=x.useState(!0),[o,b]=x.useState(null),[D,F]=x.useState("cards");x.useEffect(()=>{N()},[s]);const N=async()=>{if(s){h(!0),b(null);try{const r=localStorage.getItem("token"),m=await fetch(`/api/users/${s.id}/accounts`,{headers:{Authorization:`Bearer ${r}`}});if(!m.ok)throw new Error(`Failed to fetch accounts: ${m.status}`);const H=await m.json();d(H)}catch(r){console.error("Error fetching accounts:",r),b("Failed to load accounts. Please try again."),$.error("Could not load your accounts")}finally{h(!1)}}},y=()=>{l("/accounts/create")},L=()=>{l("/transfer")},v=r=>{l(`/accounts/${r}/transactions`)},z=n.reduce((r,m)=>r+m.balance,0);return e.jsx(G,{children:e.jsxs("div",{className:"flex-1 space-y-4 p-4 pt-6 md:p-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Your Accounts"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(t,{onClick:L,variant:"outline",children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Transfer"]}),e.jsxs(t,{onClick:y,children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"New Account"]})]})]}),e.jsxs(c,{children:[e.jsx(I,{className:"pb-2",children:e.jsx(S,{children:"Summary"})}),e.jsx(i,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Balance"}),e.jsx("p",{className:"text-2xl font-bold",children:f(z)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Accounts"}),e.jsx("p",{className:"text-2xl font-bold",children:n.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"View Analytics"}),e.jsxs(t,{variant:"link",className:"p-0 h-8",onClick:()=>l("/analytics"),children:[e.jsx(M,{className:"h-4 w-4 mr-1"}),"View Financial Analytics"]})]})]})})]}),e.jsxs(R,{value:D,onValueChange:F,children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(K,{children:[e.jsx(w,{value:"cards",children:"Cards View"}),e.jsx(w,{value:"table",children:"Table View"})]})}),e.jsx(T,{value:"cards",className:"mt-4",children:a?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(r=>e.jsx(c,{className:"h-48 animate-pulse",children:e.jsx(i,{className:"p-6",children:e.jsx("div",{className:"h-full bg-muted/20 rounded-lg"})})},r))}):o?e.jsx(c,{className:"bg-destructive/10",children:e.jsxs(i,{className:"p-6 text-center",children:[e.jsx("p",{className:"text-destructive font-medium",children:o}),e.jsx(t,{onClick:N,variant:"outline",className:"mt-4",children:"Retry"})]})}):n.length===0?e.jsx(c,{children:e.jsxs(i,{className:"p-6 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"You don't have any accounts yet."}),e.jsxs(t,{onClick:y,className:"mt-4",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Create Your First Account"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(r=>e.jsx(W,{account:r,onViewTransactions:()=>v(r.id)},r.id))})}),e.jsx(T,{value:"table",className:"mt-4",children:a?e.jsx(c,{children:e.jsx(i,{className:"p-6 min-h-[300px] flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})})}):o?e.jsx(c,{className:"bg-destructive/10",children:e.jsxs(i,{className:"p-6 text-center",children:[e.jsx("p",{className:"text-destructive font-medium",children:o}),e.jsx(t,{onClick:N,variant:"outline",className:"mt-4",children:"Retry"})]})}):e.jsx(Z,{accounts:n,onViewTransactions:v})})]})]})})};export{pe as default};
