import{j as e,B as b,C as m,a as k,b as w,c as A,d as x}from"./ui-DCtcd1Kk.js";import{T as $,a as R,b as C,c as h,d as z,e as u}from"./table-D9jKlXO1.js";import{c as H,r as p,u as M}from"./router-C32cmwfs.js";import{u as O,t as j}from"./index-XEsyHGvM.js";import{B as U}from"./badge-CCKXs842.js";import{T as _,a as q,b as I,c as D}from"./tabs-BP-itumS.js";import{S as N}from"./separator-BHw_LxXo.js";import{D as G}from"./DashboardLayout-gnvqe74Z.js";import{A as K}from"./AdminLayout-Dt8VV5pt.js";import{c as V}from"./RootLayout-Bf31PLGy.js";import"./charts-BMSya-r6.js";import"./react-Csw2ODfV.js";import"./utils-DCNUdSfE.js";import"./Sidebar-CR8TwwPA.js";import"./arrow-right-left-DbfiJvWz.js";import"./gift-41HnvwwA.js";/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Z=V("arrow-left",Y),xe=()=>{var g,y,v;const{userId:i}=H(),[s,T]=p.useState(null),[L,f]=p.useState(!0),{user:r}=O(),d=M(),n=(g=r==null?void 0:r.roles)==null?void 0:g.includes("ROLE_ADMIN"),c=(r==null?void 0:r.id)===Number(i)||!i,l=i||(r==null?void 0:r.id);p.useEffect(()=>{if(!l){j.error("User ID is required"),d(n?"/admin/users":"/dashboard");return}B(l)},[l]);const B=async a=>{try{f(!0);const t=localStorage.getItem("token");if(!t){j.error("Authentication token not found"),d("/login");return}const o=await fetch(`/api/users/${a}`,{headers:{Authorization:`Bearer ${t}`}});if(!o.ok)throw new Error(`Failed to fetch user details: ${o.status}`);const S=await o.json();T(S)}catch(t){console.error("Error fetching user details:",t),j.error("Failed to load user details"),d(n?"/admin/users":"/dashboard")}finally{f(!1)}},P=n&&!c?K:G,E=a=>a?new Date(a).toLocaleDateString():"N/A",F=a=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(a);return e.jsx(P,{children:e.jsxs("div",{className:"flex-1 space-y-4 p-4 md:p-8",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{variant:"outline",size:"icon",onClick:()=>d(n&&!c?"/admin/users":"/dashboard"),className:"mr-4",children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:c?"My Profile":"User Details"})]}),L?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):s?e.jsxs(_,{defaultValue:"profile",className:"w-full",children:[e.jsxs(q,{className:"grid w-full md:w-[400px] grid-cols-2",children:[e.jsx(I,{value:"profile",children:"Profile"}),e.jsx(I,{value:"financial",children:"Financial Info"})]}),e.jsx(D,{value:"profile",className:"space-y-4 mt-4",children:e.jsxs(m,{children:[e.jsxs(k,{children:[e.jsx(w,{children:"User Information"}),e.jsx(A,{children:"Personal details and application access"})]}),e.jsxs(x,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"User ID"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.id})]}),e.jsx(N,{}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Full Name"}),e.jsx("p",{className:"text-muted-foreground",children:s.name})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Email"}),e.jsx("p",{className:"text-muted-foreground",children:s.email})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Phone Number"}),e.jsx("p",{className:"text-muted-foreground",children:s.phoneNumber||"Not provided"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Roles"}),e.jsx("div",{className:"flex gap-1 flex-wrap",children:(y=s.roles)==null?void 0:y.map(a=>e.jsx(U,{variant:a.includes("ADMIN")?"default":"outline",children:a.replace("ROLE_","")},a))})]})]}),s.kyc&&e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"KYC Information"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Date of Birth"}),e.jsx("p",{className:"text-muted-foreground",children:E(s.kyc.dateOfBirth)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Aadhaar Number"}),e.jsx("p",{className:"text-muted-foreground",children:s.kyc.aadhaarNumber||"Not provided"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"PAN Number"}),e.jsx("p",{className:"text-muted-foreground",children:s.kyc.panNumber||"Not provided"})]})]})]})]}),((v=s.kyc)==null?void 0:v.address)&&e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Address"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Street Address"}),e.jsx("p",{className:"text-muted-foreground",children:`${s.kyc.address.line1||""} ${s.kyc.address.line2||""}`.trim()||"Not provided"}),e.jsx("p",{className:"text-muted-foreground",children:s.kyc.address.street||""})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"City, State"}),e.jsx("p",{className:"text-muted-foreground",children:`${s.kyc.address.city||""}, ${s.kyc.address.state||""}`.trim()||"Not provided"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Country"}),e.jsx("p",{className:"text-muted-foreground",children:s.kyc.address.country||"Not provided"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"ZIP Code"}),e.jsx("p",{className:"text-muted-foreground",children:s.kyc.address.zipCode||"Not provided"})]})]})]})]})]})]})}),e.jsx(D,{value:"financial",className:"space-y-4 mt-4",children:e.jsxs(m,{children:[e.jsxs(k,{children:[e.jsx(w,{children:"Financial Information"}),e.jsx(A,{children:"Account details and balances"})]}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Accounts"}),s.accounts&&s.accounts.length>0?e.jsx("div",{className:"rounded-md border",children:e.jsxs($,{children:[e.jsx(R,{children:e.jsxs(C,{children:[e.jsx(h,{children:"Account Number"}),e.jsx(h,{children:"Type"}),e.jsx(h,{className:"text-right",children:"Balance"})]})}),e.jsx(z,{children:s.accounts.map(a=>e.jsxs(C,{children:[e.jsx(u,{className:"font-medium",children:a.accountNumber}),e.jsx(u,{children:a.type}),e.jsx(u,{className:"text-right",children:F(a.balance)})]},a.id))})]})}):e.jsx("p",{className:"text-muted-foreground",children:"No accounts found."})]})})]})})]}):e.jsx(m,{children:e.jsxs(x,{className:"py-8 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"User not found or you don't have permission to view this user."}),e.jsx(b,{onClick:()=>d(n?"/admin/users":"/dashboard"),className:"mt-4",children:"Go back"})]})})]})})};export{xe as default};
